# Android Prompt & PromptBehavior

| Product | Prompt            | Embedded Behavior                                                                                                                                                                                                                                          | (Embedded) OpenId Prompt Equivalent                                                              | Sent to Broker?      | Broker Behavior                                                                                                                                                                                                                                                                                                        | (Broker) OpenId Prompt Equivalent                         |
|---------|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|
| ADAL    | `null`            | Equivalent to `Auto`                                                                                                                                                                                                                                       | (unsent)                                                                                         | N/A                  | Equivalent to `Auto`                                                                                                                                                                                                                                                                                                   | (unsent)                                                  |
| ADAL    | `Auto`            | Silent request is first attempted. If unsuccessful, switch to interactive.                                                                                                                                                                                 | (unsent)                                                                                         | Yes                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |
| ADAL    | `Always`          | The user will be prompted for credentials even if cached tokens already exist.                                                                                                                                                                             | `login`                                                                                          | Yes, augmented       | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |
| ADAL    | `REFRESH_SESSION` | Interactively reauthorizes the user. If cookies are available in WebView, the user will not be prompted for credentials and the UI will dismiss automatically.                                                                                             | `refresh_session`                                                                                | Yes, but unsupported | Unsupported by V2 endpoint                                                                                                                                                                                                                                                                                             | (unsent)                                                  |
| ADAL    | `FORCE_PROMPT`    | If no broker is installed, behaves equivalent to `Always`. If broker _is_ installed, a prompt for credentials will be shown.                                                                                                                               | `login`                                                                                          | Yes                  | Equivalent to `Always` in embedded flow.                                                                                                                                                                                                                                                                               | `login`                                                   |
| MSAL    | `null`            | Equivalent to `WHEN_REQUIRED`                                                                                                                                                                                                                              | (unsent)                                                                                         | N/A                  | Broker attempts silent request first. If `claimsChallenge` is provided, broker will skip AT in cache and use RT to acquire new tokens. If silent request fails, call will go interactive.                                                                                                                              | (unsent)                                                  |
| MSAL    | `SELECT_ACCOUNT`  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, sends query param `prompt=select_account` to `/authorize` endpoint. Shows a list of accounts the user can choose from to authorize.                                             | If `login_hint` is supplied, unsent <br/> If no `login_hint` is supplied, sends `select_account` | Yes                  | If `login_hint` is supplied, behaves as `null`/`WHEN_REQUIRED`; otherwise, `AccountChooserActivity` is shown. Account picker inside of ESTS/WebView is _never_ shown, as the user would have already pre-selected an account via `AccountChooserActivity`. If user selects '`Add Account`', no `prompt=login` is sent. | (unsent - account selection via `AccountChooserActivity`) |
| MSAL    | `LOGIN`           | Sends query param `prompt=login` to `/authorize` endpoint. The user will _always_ be prompted for credentials by the service.                                                                                                                              | `login`                                                                                          | Yes                  | Same as embedded flow.                                                                                                                                                                                                                                                                                                 | `login`                                                   |
| MSAL    | `CONSENT`         | Sends query param `prompt=consent` to `/authorize` endpoint. The user will be prompted to grant consent, even if it was previously granted before. This param will be ignored by 1P apps, as these apps are pre-consented via M365 TOC.                                                              | `consent`                                                                                        | Yes                  |  Sends query param `prompt=consent` to `/authorize` endpoint. The user will be prompted to grant consent, even if it was previously granted before.                                                                                                                                                                                                                                      | `consent`                                                 |
| MSAL    | `WHEN_REQUIRED`   | If `login_hint` is supplied, no `prompt` query parameter will be sent to the `/authorize` endpoint. The user _may_ be prompted to login or grant consent as required by the service/application. If no `login_hint` is supplied, `prompt=select_account`. | If `login_hint` is supplied, unsent <br/> If no `login_hint` is supplied, sends `select_account` | N/A                  | Same as embedded flow                                                                                                                                                                                                                                                                                                  | (unsent - account selection via `AccountChooserActivity`) |
